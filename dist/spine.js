/*! Spine-JS - v0.0.1 - 2013-04-01 */
var Spine=Spine||{};Spine._DEBUG_=false;Spine.AttachmentType={REGION:0,REGION_SEQUENCE:1};self.Float32Array=self.Float32Array||Array;if(!Array.isArray){Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}}(function(){var t=0;var e=["ms","moz","webkit","o"];for(var n=0;n<e.length&&!window.requestAnimationFrame;++n){window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(e,n){var i=(new Date).getTime();var s=Math.max(0,16-(i-t));var a=window.setTimeout(function(){e(i+s)},s);t=i+s;return a};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(t){clearTimeout(t)}})();Spine.max=function(t,e){return t>e?t:e};Spine.load=function(t,e){if(!t.skeleton)throw"dataLoad.skeleton should be defined";if(!t.animations)throw"dataLoad.animations should be defined";if(!t.imgPattern&&!t.atlas)throw"dataLoad.imgPattern or data.atlas should be defined";var n,i,s=new Array(t.animations.length);if(t.imgPattern)n=new Spine.AttachmentLoader(t.imgPattern);else if(t.atlas)throw"atlas not supported yed";var a=new Spine.SkeletonJson(n);if(t.skeletonScale)a.setScale(t.skeletonScale);a.readSkeletonData(t.skeleton,function(n){i=new Spine.Skeleton(n);var r=0;function o(t,o){a.readAnimation(t,n,function(t){s[o]=t;++r;if(r===s.length){a=null;e(i,s)}})}for(var h=0,l=s.length;h<l;++h){o(t.animations[h],h)}})};Spine.SendXhrRequest=function(t,e,n){var i=new XMLHttpRequest;i.open(t.method||"GET",t.url,true);i.onreadystatechange=function(t){if(i.readyState!==4){return}if([200,304].indexOf(i.status)===-1){if(n)n(i.status)}else{if(e)e(i.responseText)}};i.send(t.data||null)};function readCurve(t,e,n){var i=n["curve"];if(!i)return;if(i=="stepped"){t.setStepped(e)}else if(Array.isArray(i)){t.setCurve(e,i[0],i[1],i[2],i[3])}}function toColor(t,e){if(t.length!=8)throw"Error parsing color, length must be 8: "+t;var n=parseInt(t.substr(e*2,2),16);return n/255}Spine.SkeletonJson=function(t){this._attachmentResolver=t;this._scale=1;this._yDown=true};Spine.SkeletonJson.prototype={destroy:function(){this._attachmentResolver.destroy();this._attachmentResolver=null},setScale:function(t){this._scale=t},readSkeletonData:function(t,e){var n=this;Spine.SendXhrRequest({url:t},function(t){var i=JSON.parse(t),s=i["bones"],a=i["slots"],r=i["skins"],o,h,l,f,m,c,u,d,p;var S=new Spine.SkeletonData;if(s){S.bones=new Array(s.length);for(h=0,m=s.length;h<m;++h){c={name:s[h]["name"],parent:null,length:(s[h]["length"]||0)*n._scale,x:(s[h]["x"]||0)*n._scale,y:(s[h]["y"]||0)*n._scale,scaleX:s[h]["scaleX"]||1,scaleY:s[h]["scaleY"]||1,rotation:s[h]["rotation"]||0,yDown:n._yDown};var g=s[h]["parent"];if(g){c.parent=S.findBone(g);if(!c.parent){console.error("Parent bone not found: "+g)}}S.bones[h]=c}}if(a){S.slots=new Array(a.length);for(h=0,m=a.length;h<m;++h){u={name:a[h]["name"],bone:null,r:1,g:1,b:1,a:1,attachmentName:a[h]["attachment"]||""};var y=a[h]["color"];if(y){u.r=toColor(y,0);u.g=toColor(y,1);u.b=toColor(y,2);u.a=toColor(y,3)}var v=a[h]["bone"];if(v){u.bone=S.findBone(v);if(!u.bone){console.error("Slot bone not found: "+v)}}S.slots[h]=u}}if(r){for(h in r){d=new Spine.Skin(h);a=r[h];for(l in a){var w=S.findSlotIndex(l);o=a[l];for(f in o){var b=o[f];p=new Spine.RegionAttachment(f,n._attachmentResolver);p.x=(b["x"]||0)*n._scale;p.y=(b["y"]||0)*n._scale;p.scaleX=(b["scaleX"]||1)*n._scale;p.scaleY=(b["scaleY"]||1)*n._scale;p.rotation=b["rotation"]||0;p.width=(b["width"]||32)*n._scale;p.height=(b["height"]||32)*n._scale;d.addAttachment(w,f,p)}}S.skins.push(d);if(h=="default")S.defaultSkin=d}}e(S)})},readAnimation:function(t,e,n){var i=this;if(!e)throw"skeletonData cannot be null";Spine.SendXhrRequest({url:t},function(t){var s=JSON.parse(t),a=s["bones"],r=s["slots"],o,h,l,f,m,c,u,d,p,S,g;var y="scale",v="rotate",w="translate",b="attachment",T="color";var A=[],_=0;if(a){for(o in a){h=e.findBoneIndex(o);if(h<0)throw"Bone not found: "+o;l=a[o];for(f in l){m=l[f];if(f==v){c=new Spine.RotateTimeline(m.length);c.boneIndex=h;for(d=0,p=m.length;d<p;++d){u=m[d];c.setKeyframe(d,u["time"],u["angle"]);readCurve(c,d,u)}}else if(f==w||f==y){var R=1;if(f==w)c=new Spine.TranslateTimeline(m.length);else{c=new Spine.ScaleTimeline(m.length);R=i._scale}c.boneIndex=h;for(d=0,p=m.length;d<p;++d){u=m[d];c.setKeyframe(d,u["time"],(u["x"]||0)*R,(u["y"]||0)*R);readCurve(c,d,u)}}else{throw"Invalid timeline type for a bone: "+f+" ("+o+")"}A.push(c);if(c.getDuration()>_)_=c.getDuration()}}}if(r){for(S in r){g=e.findSlotIndex(S);if(g<0)throw"Slot not found: "+S;l=r[S];for(f in l){m=l[f];if(f==T){c=new Spine.ColorTimeline(m.length);c.slotIndex=g;for(d=0,p=m.length;d<p;++d){u=m[d];var E=u["color"];c.setKeyframe(d,u["time"],toColor(E,0),toColor(E,1),toColor(E,2),toColor(E,3));readCurve(c,d,u)}}else if(f==b){c=new Spine.AttachmentTimeline(m.length);c.slotIndex=g;for(d=0,p=m.length;d<p;++d){u=m[d];c.setKeyframe(d,u["time"],u["name"]||"")}}else{throw"Invalid timeline type for a slot: "+f+" ("+S+")"}A.push(c);if(c.getDuration()>_)_=c.getDuration()}}}var L=new Spine.Animation(A,_);n(L)})}};Spine.SkeletonData=function(){this.bones=[];this.slots=[];this.skins=[];this.defaultSkin=null};Spine.SkeletonData.prototype={findBone:function(t){var e=this.findBoneIndex(t);if(e<0)return null;return this.bones[e]},findBoneIndex:function(t){for(var e=0,n=this.bones.length;e<n;++e){if(this.bones[e].name==t)return e}return-1},findSlot:function(t){var e=this.findSlotIndex(t);if(e<0)return null;return this.slots[e]},findSlotIndex:function(t){for(var e=0,n=this.slots.length;e<n;++e){if(this.slots[e].name==t)return e}return-1},findSkin:function(t){for(var e=0,n=this.skins.length;e<n;++e){if(this.skins[e].name==t)return this.skins[e]}return null}};Spine.AttachmentLoader=function(t){this._path=t;this._images={}};Spine.AttachmentLoader.prototype={destroy:function(){for(var t in this._images){this._images[t]=null}},resolve:function(t){var e=this._images[t];if(e)return e;var n=this._path.split("{name}").join(t);var i=new Image;i._spine_loaded=false;i.onload=function(){i._spine_loaded=true};i.src=n;this._images[t]=i;return i}};Spine.RegionAttachment=function(t,e){this.name=t;this._attachmentResolver=e;this.x=0;this.y=0;this.scaleX=1;this.scaleY=1;this.rotation=0;this.width=0;this.height=0;this._img=this._attachmentResolver.resolve(t);this._imgX=0;this._imgY=0;this._imgRot=0;this._imgScaleX=1;this._imgScaleY=0};Spine.RegionAttachment.prototype={destroy:function(){},updateWorldTransform:function(t,e,n){if(this._img._spine_loaded){this._imgX=n.bone.worldX+this.x*n.bone.m00+this.y*n.bone.m01;this._imgY=n.bone.worldY+this.x*n.bone.m10+this.y*n.bone.m11;this._imgRot=-(n.bone.worldRotation+this.rotation);this._imgScaleX=n.bone.worldScaleX+this.scaleX-1;this._imgScaleY=n.bone.worldScaleY+this.scaleY-1;if(t){this._imgScaleX*=-1;this._imgRot*=-1}if(e){this._imgScaleY*=-1;this._imgRot*=-1}}},draw:function(t){t.save();t.translate(this._imgX,this._imgY);t.rotate(this._imgRot*(Math.PI/180));var e=-(this._img.width*this._imgScaleX>>1),n=-(this._img.height*this._imgScaleY>>1);t.drawImage(this._img,e,n,this.width,this.height);t.restore()}};Spine.Animation=function(t,e){this.timelines=t;this.duration=e*1e3};Spine.Animation.prototype={destroy:function(){for(var t=0,e=this.timelines.length;t<e;++t){this.timelines[t].destroy();this.timelines[t]=null}},apply:function(t,e,n,i){if(n&&this.duration)e%=this.duration;e*=.001;for(var s=0,a=this.timelines.length;s<a;++s){this.timelines[s].apply(t,e,i||1)}},mix:function(t,e,n,i){this.apply(t,e,n,i)}};var LINEAR=0;var STEPPED=-1;var BEZIER_SEGMENTS=10;var CurveTimeline=function(t){this.curves=new Float32Array((t-1)*6)};CurveTimeline.prototype={destroy:function(){this.curves=null},setLinear:function(t){this.curves[t*6]=LINEAR},setStepped:function(t){this.curves[t*6]=STEPPED},setCurve:function(t,e,n,i,s){var a=1/BEZIER_SEGMENTS,r=a*a,o=r*a,h=3*a,l=3*r,f=6*r,m=6*o,c=-e*2+i,u=-n*2+s,d=(e-i)*3+1,p=(n-s)*3+1,S=t*6;this.curves[S]=e*h+c*l+d*o;this.curves[S+1]=n*h+u*l+p*o;this.curves[S+2]=c*f+d*m;this.curves[S+3]=u*f+p*m;this.curves[S+4]=d*m;this.curves[S+5]=p*m},getCurvePercent:function(t,e){var n=t*6,i=this.curves[n]||0;if(i==LINEAR)return e;if(i==STEPPED)return 0;var s=this.curves[n+1],a=this.curves[n+2],r=this.curves[n+3],o=this.curves[n+4],h=this.curves[n+5],l=i,f=s,m=BEZIER_SEGMENTS-2;while(true){if(l>=e){var c=l-i,u=f-s;return u+(f-u)*(e-c)/(l-c)}if(m===0)break;m--;i+=a;s+=r;a+=o;r+=h;l+=i;f+=s}return f+(1-f)*(e-l)/(1-l)}};function binarySearch(t,e,n,i){var s=0,a=e/i-2;if(a===0)return i;var r=a>>1;while(true){if(t[(r+1)*i]<=n)s=r+1;else a=r;if(s==a)return(s+1)*i;r=s+a>>1}return 0}var ROTATE_LAST_FRAME_TIME=-2;var ROTATE_FRAME_VALUE=1;Spine.RotateTimeline=function(t){CurveTimeline.call(this,t);this.framesLength=t*2;this.frames=new Float32Array(this.framesLength);this.boneIndex=0};Spine.RotateTimeline.prototype=Object.create(CurveTimeline.prototype);Spine.RotateTimeline.prototype.destroy=function(){this.curves=null;this.frames=null};Spine.RotateTimeline.prototype.getDuration=function(){return this.frames[this.framesLength-2]};Spine.RotateTimeline.prototype.getKeyFrameCount=function(){return this.framesLength/2};Spine.RotateTimeline.prototype.setKeyframe=function(t,e,n){t*=2;this.frames[t]=e;this.frames[t+1]=n};Spine.RotateTimeline.prototype.apply=function(t,e,n){if(e<this.frames[0])return;var i=t.bones[this.boneIndex],s;if(e>=this.frames[this.framesLength-2]){s=i.boneData.rotation+this.frames[this.framesLength-1]-i.rotation;while(s>180)s-=360;while(s<-180)s+=360;i.rotation+=s*n;return}var a=binarySearch(this.frames,this.framesLength,e,2),r=this.frames[a-1],o=this.frames[a],h=1-(e-o)/(this.frames[a+ROTATE_LAST_FRAME_TIME]-o);if(h<0)h=0;else if(h>1)h=1;h=this.getCurvePercent(a/2-1,h);s=this.frames[a+ROTATE_FRAME_VALUE]-r;while(s>180)s-=360;while(s<-180)s+=360;s=i.boneData.rotation+(r+s*h)-i.rotation;while(s>180)s-=360;while(s<-180)s+=360;i.rotation+=s*n};var TRANSLATE_LAST_FRAME_TIME=-3;var TRANSLATE_FRAME_X=1;var TRANSLATE_FRAME_Y=2;Spine.TranslateTimeline=function(t){CurveTimeline.call(this,t);this.framesLength=t*3;this.frames=new Float32Array(this.framesLength);this.boneIndex=0};Spine.TranslateTimeline.prototype=Object.create(CurveTimeline.prototype);Spine.TranslateTimeline.prototype.destroy=function(){this.curves=null;this.frames=null};Spine.TranslateTimeline.prototype.getDuration=function(){return this.frames[this.framesLength-3]};Spine.TranslateTimeline.prototype.getKeyFrameCount=function(){return this.framesLength/3};Spine.TranslateTimeline.prototype.setKeyframe=function(t,e,n,i){t*=3;this.frames[t]=e;this.frames[t+1]=n;this.frames[t+2]=i};Spine.TranslateTimeline.prototype.apply=function(t,e,n){if(e<this.frames[0])return;var i=t.bones[this.boneIndex];if(e>=this.frames[this.framesLength-3]){i.x+=(i.boneData.x+this.frames[this.framesLength-2]-i.x)*n;i.y+=(i.boneData.y+this.frames[this.framesLength-1]-i.y)*n;return}var s=binarySearch(this.frames,this.framesLength,e,3),a=this.frames[s-2],r=this.frames[s-1],o=this.frames[s],h=1-(e-o)/(this.frames[s+TRANSLATE_LAST_FRAME_TIME]-o);if(h<0)h=0;else if(h>1)h=1;h=this.getCurvePercent(s/3-1,h);i.x+=(i.boneData.x+a+(this.frames[s+TRANSLATE_FRAME_X]-a)*h-i.x)*n;i.y+=(i.boneData.y+r+(this.frames[s+TRANSLATE_FRAME_Y]-r)*h-i.y)*n};Spine.ScaleTimeline=function(t){Spine.TranslateTimeline.call(this,t)};Spine.ScaleTimeline.prototype=Object.create(Spine.TranslateTimeline.prototype);Spine.ScaleTimeline.prototype.apply=function(t,e,n){if(e<this.frames[0])return;var i=t.bones[this.boneIndex];if(e>=this.frames[this.framesLength-3]){i.scaleX+=(i.boneData.scaleX-1+this.frames[this.framesLength-2]-i.scaleX)*n;i.scaleY+=(i.boneData.scaleY-1+this.frames[this.framesLength-1]-i.scaleY)*n;return}var s=binarySearch(this.frames,this.framesLength,e,3),a=this.frames[s-2],r=this.frames[s-1],o=this.frames[s],h=1-(e-o)/(this.frames[s+TRANSLATE_LAST_FRAME_TIME]-o);if(h<0)h=0;else if(h>1)h=1;h=this.getCurvePercent(s/3-1,h);i.scaleX+=(i.boneData.scaleX-1+a+(this.frames[s+TRANSLATE_FRAME_X]-a)*h-i.scaleX)*n;i.scaleY+=(i.boneData.scaleY-1+r+(this.frames[s+TRANSLATE_FRAME_Y]-r)*h-i.scaleY)*n};Spine.ColorTimeline=function(t){CurveTimeline.call(this,t);this.framesLength=t*5;this.frames=new Float32Array(this.framesLength);this.slotIndex=0};Spine.ColorTimeline.prototype=Object.create(CurveTimeline.prototype);Spine.ColorTimeline.prototype.destroy=function(){this.curves=null;this.frames=null};Spine.ColorTimeline.prototype.getDuration=function(){return this.frames[this.framesLength-5]};Spine.ColorTimeline.prototype.getKeyFrameCount=function(){return this.framesLength/5};Spine.ColorTimeline.prototype.setKeyframe=function(t,e,n,i,s,a){t*=5;this.frames[t]=e;this.frames[t+1]=n;this.frames[t+2]=i;this.frames[t+3]=s;this.frames[t+4]=a};Spine.ColorTimeline.prototype.apply=function(t,e,n){if(e<this.frames[0])return;var i=t.slots[this.slotIndex];if(e>=this.frames[this.framesLength-5]){var s=this.framesLength-1;i.r=this.frames[s-3];i.g=this.frames[s-2];i.b=this.frames[s-1];i.a=this.frames[s];return}var a=binarySearch(this.frames,this.framesLength,e,5),r=this.frames[a-4],o=this.frames[a-3],h=this.frames[a-2],l=this.frames[a-1],f=this.frames[a],m=1-(e-f)/(this.frames[a+COLOR_LAST_FRAME_TIME]-f);if(m<0)m=0;else if(m>1)m=1;m=this.getCurvePercent(a/5-1,m);var c=r+(this.frames[a+COLOR_FRAME_R]-r)*m,u=o+(this.frames[a+COLOR_FRAME_G]-o)*m,d=h+(this.frames[a+COLOR_FRAME_B]-h)*m,p=l+(this.frames[a+COLOR_FRAME_A]-l)*m;if(n<1){i.r+=(c-i.r)*n;i.g+=(u-i.g)*n;i.b+=(d-i.b)*n;i.a+=(p-i.a)*n}else{i.r=c;i.g=u;i.b=d;i.a=p}};Spine.AttachmentTimeline=function(t){this.framesLength=t;this.frames=new Float32Array(this.framesLength);this.attachmentNames=[];this.slotIndex=0};Spine.AttachmentTimeline.prototype={destroy:function(){this.frames=null},getDuration:function(){return this.frames[this.framesLength-1]},getKeyframeCount:function(){return this.framesLength},setKeyframe:function(t,e,n){this.frames[t]=e;if(this.attachmentNames[t])this.attachmentNames[t]=null;this.attachmentNames[t]=n},apply:function(t,e,n){if(e<this.frames[0])return;var i;if(e>=this.frames[this.framesLength-1])i=this.framesLength-1;else i=binarySearch(this.frames,this.framesLength,e,1)-1;var s=this.attachmentNames[i];t.slots[this.slotIndex].setAttachment(s?t.getAttachmentByIndex(this.slotIndex,s):null)}};Spine.Skeleton=function(t){this.skeletonData=t;this.bones=[];this.slots=[];this.drawOrder=[];this.skin=null;this.flipX=false;this.flipY=false;if(!t)throw"skeletonData cannot be null";var e=t.bones.length,n=t.slots.length,i,s,a,r,o,h;this.bones=new Array(e);for(a=0;a<e;++a){i=t.bones[a];s=new Spine.Bone(i);if(i.parent){for(r=0;r<e;++r){if(t.bones[r]==i.parent){s.parent=this.bones[r];break}}}this.bones[a]=s}this.slots=new Array(n);this.drawOrder=new Array(n);for(a=0;a<n;++a){o=t.slots[a];s=null;for(r=0;r<e;++r){if(t.bones[r]==o.bone){s=this.bones[r];break}}h=new Spine.Slot(o,this,s);this.slots[a]=h;this.drawOrder[a]=h}};Spine.Skeleton.prototype={destroy:function(){var t,e;for(t=0,e=this.bones.length;t<e;++t){this.bones[t].destroy();this.bones[t]=null}for(t=0,e=this.slots.length;t<e;++t){this.slots[t].destroy();this.slots[t]=null}},updateWorldTransform:function(){var t,e;for(t=0,e=this.bones.length;t<e;++t){this.bones[t].updateWorldTransform(this.flipX,this.flipY)}var n,i;for(t=0,e=this.drawOrder.length;t<e;++t){n=this.drawOrder[t];i=n.attachment;if(i){i.updateWorldTransform(this.flipX,this.flipY,n)}}},setToBindPose:function(){this.setBonesToBindPose();this.setSlotsToBindPose()},setBonesToBindPose:function(){for(var t=0,e=this.bones.length;t<e;++t){this.bones[t].setToBindPose()}},setSlotsToBindPose:function(){for(var t=0,e=this.slots.length;t<e;++t){this.slots[t].setToBindPoseByIndex(t)}},getRootBone:function(){if(this.bones.length===0)return null;return this.bones[0]},findBone:function(t){var e=this.findBoneIndex(t);if(e<0)return null;return this.bones[e]},findBoneIndex:function(t){for(var e=0,n=this.bones.length;e<n;++e){if(this.bones[e].boneData.name==t)return e}return-1},findSlot:function(t){var e=this.findSlotIndex(t);if(e<0)return null;return this.slots[e]},findSlotIndex:function(t){for(var e=0,n=this.slots.length;e<n;++e){if(this.slots[e].slotData.name==t)return e}return-1},setSkinByName:function(t){var e=skeletonData.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){if(this.skin&&t){t.attachAll(this,skin)}this.skin=t},getAttachmentByName:function(t,e){return this.getAttachmentByIndex(this.skeletonData.findSlotIndex(t),e)},getAttachmentByIndex:function(t,e){if(this.skin){return this.skin.getAttachment(t,e)}if(this.skeletonData.defaultSkin){var n=this.skeletonData.defaultSkin.getAttachment(t,e);if(n)return n}return null},setAttachment:function(t,e){if(!t)throw"slotName cannot be null.";var n,i;for(var s=0,a=this.slots.length;s<a;++s){n=this.slots[s];if(n.slotData.name==t){if(e){i=this.getAttachmentByIndex(s,e);if(!i){throw"Attachment not found: "+e+", for slot: "+t}n.setAttachment(i)}return}}throw"Slot not found: "+t},draw:function(t){var e;for(i=0,n=this.drawOrder.length;i<n;++i){e=this.drawOrder[i].attachment;if(e){e.draw(t)}}if(Spine._DEBUG_){for(var s=0,a=this.bones.length;s<a;++s){if(this.bones[s].boneData.length>0){t.save();t.strokeStyle="red";t.translate(this.bones[s].worldX,this.bones[s].worldY);t.rotate(-this.bones[s].worldRotation*(Math.PI/180));t.beginPath();t.moveTo(0,0);t.lineTo(this.bones[s].boneData.length,0);t.closePath();t.stroke();t.restore()}t.fillStyle="green";t.arc(this.bones[s].worldX,this.bones[s].worldY,3,0,Math.PI*2,true);t.closePath();t.fill()}}}};Spine.Bone=function(t){this.boneData=t;this.parent=null;this.x=t.x;this.y=t.y;this.rotation=t.rotation;this.scaleX=t.scaleX;this.scaleY=t.scaleY;this.m00=0;this.m01=0;this.worldX=0;this.m10=0;this.m11=0;this.worldY=0;this.worldRotation=0;this.worldScaleX=1;this.worldScaleY=1;if(!t)throw"boneData cannot be null"};Spine.Bone.prototype={destroy:function(){},setToBindPose:function(){this.x=this.boneData.x;this.y=this.boneData.y;this.rotation=this.boneData.rotation;this.scaleX=this.boneData.scaleX;this.scaleY=this.boneData.scaleY},updateWorldTransform:function(t,e){if(this.parent){this.worldX=this.x*this.parent.m00+this.y*this.parent.m01+this.parent.worldX;this.worldY=this.x*this.parent.m10+this.y*this.parent.m11+this.parent.worldY;this.worldScaleX=this.parent.worldScaleX*this.scaleX;this.worldScaleY=this.parent.worldScaleY*this.scaleY;this.worldRotation=this.parent.worldRotation+this.rotation}else{this.worldX=this.x;this.worldY=this.y;this.worldScaleX=this.scaleX;this.worldScaleY=this.scaleY;this.worldRotation=this.rotation}var n=this.worldRotation*Math.PI/180,i=Math.cos(n),s=Math.sin(n);this.m00=i*this.worldScaleX;this.m10=s*this.worldScaleX;this.m01=-s*this.worldScaleY;this.m11=i*this.worldScaleY;if(t){this.m00*=-1;this.m01*=-1}if(e){this.m10*=-1;this.m11*=-1}if(this.boneData.yDown){this.m10*=-1;this.m11*=-1}}};Spine.Slot=function(t,e,n){this.slotData=t;this.skeleton=e;this.bone=n;this.r=1;this.g=1;this.b=1;this.a=1;this.attachment=null;this._attachmentTime=0;if(!t)throw"slotData cannot be null";if(!e)throw"skeleton cannot be null";if(!n)throw"bone cannot be null";this.setToBindPose()};Spine.Slot.prototype={destroy:function(){},setAttachment:function(t){this.attachment=t;this._attachmentTime=this.skeleton.time},setAttachmentTime:function(t){this._attachmentTime=this.skeleton.time-t},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToBindPoseByIndex:function(t){this.r=this.slotData.r;this.g=this.slotData.g;this.b=this.slotData.b;this.a=this.slotData.a;this.setAttachment(this.slotData.attachmentName?this.skeleton.getAttachmentByIndex(t,this.slotData.attachmentName):null)},setToBindPose:function(){for(var t=0,e=this.skeleton.skeletonData.slots.length;t<e;++t){if(this.slotData==this.skeleton.skeletonData.slots[t]){this.setToBindPoseByIndex(t);return}}}};Spine.Skin=function(t){this.name=t;this._attachments={}};Spine.Skin.prototype={destroy:function(){for(var t in this._attachments){this._attachments[t].destroy();this._attachments[t]=null}},addAttachment:function(t,e,n){if(!n)throw"attachment cannot be null.";var i=[t,e];this._attachments[i]=n},getAttachment:function(t,e){var n=[t,e];if(this._attachments.hasOwnProperty(n)){return this._attachments[n]}return null},attachAll:function(t,e){var n,i;for(var s in this._attachments){n=t.slots[s[0]];if(n.attachment==s[1]){i=this.getAttachment(s[0],s[1]);if(i)n.setAttachment(i)}}}};