/*! Spine-JS - v0.0.2 - 2013-04-14 */
var Spine=Spine||{};Spine._DEBUG_=false;Spine.AttachmentType={REGION:0,REGION_SEQUENCE:1};self.Float32Array=self.Float32Array||Array;if(!Array.isArray){Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}}(function(){var t=0;var e=["ms","moz","webkit","o"];for(var i=0;i<e.length&&!window.requestAnimationFrame;++i){window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(e,i){var n=(new Date).getTime();var s=Math.max(0,16-(n-t));var a=window.setTimeout(function(){e(n+s)},s);t=n+s;return a};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(t){clearTimeout(t)}})();Spine.max=function(t,e){return t>e?t:e};Spine.load=function(t,e){if(!t.skeleton)throw"dataLoad.skeleton should be defined";if(!t.imgPattern&&!t.atlas)throw"dataLoad.imgPattern or data.atlas should be defined";var i,n;if(t.imgPattern)i=new Spine.AttachmentLoader(t.imgPattern);else if(t.atlas)throw"atlas not supported yed";var s=new Spine.SkeletonJson(i);if(t.skeletonScale)s.setScale(t.skeletonScale);s.readSkeletonData(t.skeleton,function(t){e(new Spine.Skeleton(t))})};Spine.SendXhrRequest=function(t,e,i){var n=new XMLHttpRequest;n.open(t.method||"GET",t.url,true);n.onreadystatechange=function(t){if(n.readyState!==4){return}if([200,304].indexOf(n.status)===-1){if(i)i(n.status)}else{if(e)e(n.responseText)}};n.send(t.data||null)};Spine.SkeletonJson=function(t){this._attachmentResolver=t;this._scale=1;this._yDown=true};Spine.SkeletonJson.prototype={destroy:function(){this._attachmentResolver.destroy();this._attachmentResolver=null},setScale:function(t){this._scale=t},readSkeletonData:function(t,e){var i=this;Spine.SendXhrRequest({url:t},function(t){var n=JSON.parse(t),s,a,r,o;var h=new Spine.SkeletonData;var l=n["bones"],f;if(l){h.bones=new Array(l.length);for(s=0,o=l.length;s<o;++s){f={name:l[s]["name"],parent:null,length:(l[s]["length"]||0)*i._scale,x:(l[s]["x"]||0)*i._scale,y:(l[s]["y"]||0)*i._scale,scaleX:l[s]["scaleX"]||1,scaleY:l[s]["scaleY"]||1,rotation:l[s]["rotation"]||0,yDown:i._yDown};var m=l[s]["parent"];if(m){f.parent=h.findBone(m);if(!f.parent){console.error("Parent bone not found: "+m)}}h.bones[s]=f}}var u=n["slots"],c;if(u){h.slots=new Array(u.length);for(s=0,o=u.length;s<o;++s){c={name:u[s]["name"],bone:null,r:1,g:1,b:1,a:1,attachmentName:u[s]["attachment"]||""};var p=u[s]["color"];if(p){c.r=i._toColor(p,0);c.g=i._toColor(p,1);c.b=i._toColor(p,2);c.a=i._toColor(p,3)}var d=u[s]["bone"];if(d){c.bone=h.findBone(d);if(!c.bone){console.error("Slot bone not found: "+d)}}h.slots[s]=c}}var S=n["skins"],g,v,A;if(S){h.skins=new Array(S.length);for(s in S){g=new Spine.Skin(s);u=S[s];for(a in u){var _=h.findSlotIndex(a);v=u[a];for(r in v){var y=v[r];A=new Spine.RegionAttachment(r,i._attachmentResolver);A.x=(y["x"]||0)*i._scale;A.y=(y["y"]||0)*i._scale;A.scaleX=(y["scaleX"]||1)*i._scale;A.scaleY=(y["scaleY"]||1)*i._scale;A.rotation=y["rotation"]||0;A.width=(y["width"]||32)*i._scale;A.height=(y["height"]||32)*i._scale;g.addAttachment(_,r,A)}}h.skins.push(g);if(s=="default")h.defaultSkin=g}}var T=n["animations"];if(T){for(s in T){i._readAnimation(s,T[s],h)}}e(h)})},_readAnimation:function(t,e,i){var n="scale",s="rotate",a="translate",r="attachment",o="color";var h=[],l=0;var f,m,u,c,p,d,S;var g=e["bones"],v,A;if(g){for(v in g){A=i.findBoneIndex(v);if(A<0)throw"Bone not found: "+v;f=g[v];for(m in f){u=f[m];if(m==s){c=new Spine.RotateTimeline(u.length);c.boneIndex=A;for(d=0,S=u.length;d<S;++d){p=u[d];c.setKeyframe(d,p["time"],p["angle"]);this._readCurve(c,d,p)}}else if(m==a||m==n){var _=1;if(m==a)c=new Spine.TranslateTimeline(u.length);else{c=new Spine.ScaleTimeline(u.length);_=this._scale}c.boneIndex=A;for(d=0,S=u.length;d<S;++d){p=u[d];c.setKeyframe(d,p["time"],(p["x"]||0)*_,(p["y"]||0)*_);this._readCurve(c,d,p)}}else{throw"Invalid timeline type for a bone: "+m+" ("+v+")"}h.push(c);if(c.getDuration()>l)l=c.getDuration()}}}var y=e["slots"],T,w;if(y){for(T in y){w=i.findSlotIndex(T);if(w<0)throw"Slot not found: "+T;f=y[T];for(m in f){u=f[m];if(m==o){c=new Spine.ColorTimeline(u.length);c.slotIndex=w;for(d=0,S=u.length;d<S;++d){p=u[d];var b=p["color"];c.setKeyframe(d,p["time"],this._toColor(b,0),this._toColor(b,1),this._toColor(b,2),this._toColor(b,3));this._readCurve(c,d,p)}}else if(m==r){c=new Spine.AttachmentTimeline(u.length);c.slotIndex=w;for(d=0,S=u.length;d<S;++d){p=u[d];c.setKeyframe(d,p["time"],p["name"]||"")}}else{throw"Invalid timeline type for a slot: "+m+" ("+T+")"}h.push(c);if(c.getDuration()>l)l=c.getDuration()}}}i.animations.push(new Spine.Animation(t,h,l))},_readCurve:function(t,e,i){var n=i["curve"];if(!n)return;if(n=="stepped"){t.setStepped(e)}else if(Array.isArray(n)){t.setCurve(e,n[0],n[1],n[2],n[3])}},_toColor:function(t,e){if(t.length!=8)throw"Error parsing color, length must be 8: "+t;var i=parseInt(t.substr(e*2,2),16);return i/255}};Spine.SkeletonData=function(){this.bones=[];this.slots=[];this.skins=[];this.animations=[];this.defaultSkin=null};Spine.SkeletonData.prototype={findBone:function(t){var e=this.findBoneIndex(t);if(e<0)return null;return this.bones[e]},findBoneIndex:function(t){for(var e=0,i=this.bones.length;e<i;++e){if(this.bones[e].name==t)return e}return-1},findSlot:function(t){var e=this.findSlotIndex(t);if(e<0)return null;return this.slots[e]},findSlotIndex:function(t){for(var e=0,i=this.slots.length;e<i;++e){if(this.slots[e].name==t)return e}return-1},findSkin:function(t){for(var e=0,i=this.skins.length;e<i;++e){if(this.skins[e].name==t)return this.skins[e]}return null},findAnimation:function(t){for(var e=0,i=this.animations.length;e<i;++e){if(this.animations[e].name==t)return this.animations[e]}return null}};Spine.AttachmentLoader=function(t){this._path=t;this._images={}};Spine.AttachmentLoader.prototype={destroy:function(){for(var t in this._images){this._images[t]=null}},resolve:function(t){var e=this._images[t];if(e)return e;var i=this._path.split("{name}").join(t);var n=new Image;n._spine_loaded=false;n.onload=function(){n._spine_loaded=true};n.src=i;this._images[t]=n;return n}};Spine.RegionAttachment=function(t,e){this.name=t;this._attachmentResolver=e;this.x=0;this.y=0;this.scaleX=1;this.scaleY=1;this.rotation=0;this.width=0;this.height=0;this._img=this._attachmentResolver.resolve(t);this._imgX=0;this._imgY=0;this._imgRot=0;this._imgScaleX=1;this._imgScaleY=0;this._alpha=null};Spine.RegionAttachment.prototype={destroy:function(){},updateWorldTransform:function(t,e,i){this._alpha=i.a;if(this._img._spine_loaded){this._imgX=i.bone.worldX+this.x*i.bone.m00+this.y*i.bone.m01;this._imgY=i.bone.worldY+this.x*i.bone.m10+this.y*i.bone.m11;this._imgRot=-(i.bone.worldRotation+this.rotation);this._imgScaleX=i.bone.worldScaleX+this.scaleX-1;this._imgScaleY=i.bone.worldScaleY+this.scaleY-1;if(t){this._imgScaleX*=-1;this._imgRot*=-1}if(e){this._imgScaleY*=-1;this._imgRot*=-1}}},draw:function(t){t.save();t.globalAlpha=this._alpha;t.translate(this._imgX,this._imgY);t.rotate(this._imgRot*(Math.PI/180));t.scale(this.scaleX,this.scaleY);var e=-(this._img.width*this._imgScaleX>>1),i=-(this._img.height*this._imgScaleY>>1);t.drawImage(this._img,e,i,this.width,this.height);t.restore()}};Spine.Animation=function(t,e,i){this.name=t;this.timelines=e;this.duration=i*1e3};Spine.Animation.prototype={destroy:function(){for(var t=0,e=this.timelines.length;t<e;++t){this.timelines[t].destroy();this.timelines[t]=null}},apply:function(t,e,i,n){if(i&&this.duration)e%=this.duration;e*=.001;for(var s=0,a=this.timelines.length;s<a;++s){this.timelines[s].apply(t,e,n||1)}},mix:function(t,e,i,n){this.apply(t,e,i,n)}};var LINEAR=0;var STEPPED=-1;var BEZIER_SEGMENTS=10;var CurveTimeline=function(t){this.curves=new Float32Array((t-1)*6)};CurveTimeline.prototype={destroy:function(){this.curves=null},setLinear:function(t){this.curves[t*6]=LINEAR},setStepped:function(t){this.curves[t*6]=STEPPED},setCurve:function(t,e,i,n,s){var a=1/BEZIER_SEGMENTS,r=a*a,o=r*a,h=3*a,l=3*r,f=6*r,m=6*o,u=-e*2+n,c=-i*2+s,p=(e-n)*3+1,d=(i-s)*3+1,S=t*6;this.curves[S]=e*h+u*l+p*o;this.curves[S+1]=i*h+c*l+d*o;this.curves[S+2]=u*f+p*m;this.curves[S+3]=c*f+d*m;this.curves[S+4]=p*m;this.curves[S+5]=d*m},getCurvePercent:function(t,e){var i=t*6,n=this.curves[i]||0;if(n==LINEAR)return e;if(n==STEPPED)return 0;var s=this.curves[i+1],a=this.curves[i+2],r=this.curves[i+3],o=this.curves[i+4],h=this.curves[i+5],l=n,f=s,m=BEZIER_SEGMENTS-2;while(true){if(l>=e){var u=l-n,c=f-s;return c+(f-c)*(e-u)/(l-u)}if(m===0)break;m--;n+=a;s+=r;a+=o;r+=h;l+=n;f+=s}return f+(1-f)*(e-l)/(1-l)}};function binarySearch(t,e,i,n){var s=0,a=e/n-2;if(a===0)return n;var r=a>>1;while(true){if(t[(r+1)*n]<=i)s=r+1;else a=r;if(s==a)return(s+1)*n;r=s+a>>1}return 0}var ROTATE_LAST_FRAME_TIME=-2;var ROTATE_FRAME_VALUE=1;Spine.RotateTimeline=function(t){CurveTimeline.call(this,t);this.framesLength=t*2;this.frames=new Float32Array(this.framesLength);this.boneIndex=0};Spine.RotateTimeline.prototype=Object.create(CurveTimeline.prototype);Spine.RotateTimeline.prototype.destroy=function(){this.curves=null;this.frames=null};Spine.RotateTimeline.prototype.getDuration=function(){return this.frames[this.framesLength-2]};Spine.RotateTimeline.prototype.getKeyFrameCount=function(){return this.framesLength/2};Spine.RotateTimeline.prototype.setKeyframe=function(t,e,i){t*=2;this.frames[t]=e;this.frames[t+1]=i};Spine.RotateTimeline.prototype.apply=function(t,e,i){if(e<this.frames[0])return;var n=t.bones[this.boneIndex],s;if(e>=this.frames[this.framesLength-2]){s=n.boneData.rotation+this.frames[this.framesLength-1]-n.rotation;while(s>180)s-=360;while(s<-180)s+=360;n.rotation+=s*i;return}var a=binarySearch(this.frames,this.framesLength,e,2),r=this.frames[a-1],o=this.frames[a],h=1-(e-o)/(this.frames[a+ROTATE_LAST_FRAME_TIME]-o);if(h<0)h=0;else if(h>1)h=1;h=this.getCurvePercent(a/2-1,h);s=this.frames[a+ROTATE_FRAME_VALUE]-r;while(s>180)s-=360;while(s<-180)s+=360;s=n.boneData.rotation+(r+s*h)-n.rotation;while(s>180)s-=360;while(s<-180)s+=360;n.rotation+=s*i};var TRANSLATE_LAST_FRAME_TIME=-3;var TRANSLATE_FRAME_X=1;var TRANSLATE_FRAME_Y=2;Spine.TranslateTimeline=function(t){CurveTimeline.call(this,t);this.framesLength=t*3;this.frames=new Float32Array(this.framesLength);this.boneIndex=0};Spine.TranslateTimeline.prototype=Object.create(CurveTimeline.prototype);Spine.TranslateTimeline.prototype.destroy=function(){this.curves=null;this.frames=null};Spine.TranslateTimeline.prototype.getDuration=function(){return this.frames[this.framesLength-3]};Spine.TranslateTimeline.prototype.getKeyFrameCount=function(){return this.framesLength/3};Spine.TranslateTimeline.prototype.setKeyframe=function(t,e,i,n){t*=3;this.frames[t]=e;this.frames[t+1]=i;this.frames[t+2]=n};Spine.TranslateTimeline.prototype.apply=function(t,e,i){if(e<this.frames[0])return;var n=t.bones[this.boneIndex];if(e>=this.frames[this.framesLength-3]){n.x+=(n.boneData.x+this.frames[this.framesLength-2]-n.x)*i;n.y+=(n.boneData.y+this.frames[this.framesLength-1]-n.y)*i;return}var s=binarySearch(this.frames,this.framesLength,e,3),a=this.frames[s-2],r=this.frames[s-1],o=this.frames[s],h=1-(e-o)/(this.frames[s+TRANSLATE_LAST_FRAME_TIME]-o);if(h<0)h=0;else if(h>1)h=1;h=this.getCurvePercent(s/3-1,h);n.x+=(n.boneData.x+a+(this.frames[s+TRANSLATE_FRAME_X]-a)*h-n.x)*i;n.y+=(n.boneData.y+r+(this.frames[s+TRANSLATE_FRAME_Y]-r)*h-n.y)*i};Spine.ScaleTimeline=function(t){Spine.TranslateTimeline.call(this,t)};Spine.ScaleTimeline.prototype=Object.create(Spine.TranslateTimeline.prototype);Spine.ScaleTimeline.prototype.apply=function(t,e,i){if(e<this.frames[0])return;var n=t.bones[this.boneIndex];if(e>=this.frames[this.framesLength-3]){n.scaleX+=(n.boneData.scaleX-1+this.frames[this.framesLength-2]-n.scaleX)*i;n.scaleY+=(n.boneData.scaleY-1+this.frames[this.framesLength-1]-n.scaleY)*i;return}var s=binarySearch(this.frames,this.framesLength,e,3),a=this.frames[s-2],r=this.frames[s-1],o=this.frames[s],h=1-(e-o)/(this.frames[s+TRANSLATE_LAST_FRAME_TIME]-o);if(h<0)h=0;else if(h>1)h=1;h=this.getCurvePercent(s/3-1,h);n.scaleX+=(n.boneData.scaleX-1+a+(this.frames[s+TRANSLATE_FRAME_X]-a)*h-n.scaleX)*i;n.scaleY+=(n.boneData.scaleY-1+r+(this.frames[s+TRANSLATE_FRAME_Y]-r)*h-n.scaleY)*i};var COLOR_LAST_FRAME_TIME=-5;var COLOR_FRAME_R=1;var COLOR_FRAME_G=2;var COLOR_FRAME_B=3;var COLOR_FRAME_A=4;Spine.ColorTimeline=function(t){CurveTimeline.call(this,t);this.framesLength=t*5;this.frames=new Float32Array(this.framesLength);this.slotIndex=0};Spine.ColorTimeline.prototype=Object.create(CurveTimeline.prototype);Spine.ColorTimeline.prototype.destroy=function(){this.curves=null;this.frames=null};Spine.ColorTimeline.prototype.getDuration=function(){return this.frames[this.framesLength-5]};Spine.ColorTimeline.prototype.getKeyFrameCount=function(){return this.framesLength/5};Spine.ColorTimeline.prototype.setKeyframe=function(t,e,i,n,s,a){t*=5;this.frames[t]=e;this.frames[t+1]=i;this.frames[t+2]=n;this.frames[t+3]=s;this.frames[t+4]=a};Spine.ColorTimeline.prototype.apply=function(t,e,i){if(e<this.frames[0])return;var n=t.slots[this.slotIndex];if(e>=this.frames[this.framesLength-5]){var s=this.framesLength-1;n.r=this.frames[s-3];n.g=this.frames[s-2];n.b=this.frames[s-1];n.a=this.frames[s];return}var a=binarySearch(this.frames,this.framesLength,e,5),r=this.frames[a-4],o=this.frames[a-3],h=this.frames[a-2],l=this.frames[a-1],f=this.frames[a],m=1-(e-f)/(this.frames[a+COLOR_LAST_FRAME_TIME]-f);if(m<0)m=0;else if(m>1)m=1;m=this.getCurvePercent(a/5-1,m);var u=r+(this.frames[a+COLOR_FRAME_R]-r)*m,c=o+(this.frames[a+COLOR_FRAME_G]-o)*m,p=h+(this.frames[a+COLOR_FRAME_B]-h)*m,d=l+(this.frames[a+COLOR_FRAME_A]-l)*m;if(i<1){n.r+=(u-n.r)*i;n.g+=(c-n.g)*i;n.b+=(p-n.b)*i;n.a+=(d-n.a)*i}else{n.r=u;n.g=c;n.b=p;n.a=d}};Spine.AttachmentTimeline=function(t){this.framesLength=t;this.frames=new Float32Array(this.framesLength);this.attachmentNames=[];this.slotIndex=0};Spine.AttachmentTimeline.prototype={destroy:function(){this.frames=null},getDuration:function(){return this.frames[this.framesLength-1]},getKeyframeCount:function(){return this.framesLength},setKeyframe:function(t,e,i){this.frames[t]=e;if(this.attachmentNames[t])this.attachmentNames[t]=null;this.attachmentNames[t]=i},apply:function(t,e,i){if(e<this.frames[0])return;var n;if(e>=this.frames[this.framesLength-1])n=this.framesLength-1;else n=binarySearch(this.frames,this.framesLength,e,1)-1;var s=this.attachmentNames[n];t.slots[this.slotIndex].setAttachment(s?t.getAttachmentByIndex(this.slotIndex,s):null)}};Spine.AnimationState=function(t){if(!t)throw"data cannot be null";this._data=t;this.currentAnim=null;this.previousAnim=null;this.currentTime=0;this.previousTime=0;this.currentLoop=false;this.previousLoop=false;this.mixTime=0;this.mixDuration=0};Spine.AnimationState.prototype={destroy:function(){},update:function(t){this.currentTime+=t;this.previousTime+=t;this.mixTime+=t},apply:function(t){if(!this.currentAnim)return;if(this.previousAnim){this.previousAnim.apply(t,this.previousTime,this.previousLoop);var e=this.mixTime/this.mixDuration;if(e>=1){e=1;this.previousAnim=null}this.currentAnim.mix(t,this.currentTime,this.currentLoop,e)}else{this.currentAnim.apply(t,this.currentTime,this.currentLoop)}},setAnimationFromName:function(t,e){var i=this._data.getSkeletonData().findAnimation(t);if(!i)throw"Animation not found: "+t;this.setAnimation(i,e)},setAnimation:function(t,e){this.previousAnim=null;if(t&&this.currentAnim){this.mixDuration=this._data.getMix(this.currentAnim,t);if(this.mixDuration>0){this.mixTime=0;this.previousAnim=this.currentAnim;this.previousTime=this.currentTime;this.previousLoop=this.currentLoop}}this.currentAnim=t;this.currentLoop=e;this.currentTime=0},getAnimation:function(){return this.currentAnim},getTime:function(){return this.currentTime}};Spine.AnimationStateData=function(t){this._skeletonData=t;this._animationToMixTime={}};Spine.AnimationStateData.prototype={destroy:function(){},getSkeletonData:function(){return this._skeletonData},setMixFromNames:function(t,e,i){var n=this._skeletonData.findAnimation(t),s=this._skeletonData.findAnimation(e);if(!n)throw"Animation not found: "+t;if(!s)throw"Animation not found: "+e;this.setMix(n,s,i)},setMix:function(t,e,i){if(!t||!e)throw"From or to cannot be null";var n={a1:t,a2:e};this._animationToMixTime[n]=i},getMix:function(t,e){var i={a1:t,a2:e};if(this._animationToMixTime.hasOwnProperty(i)){return this._animationToMixTime[i]}return 0}};Spine.Skeleton=function(t){this.skeletonData=t;this.bones=[];this.slots=[];this.drawOrder=[];this.skin=null;this.flipX=false;this.flipY=false;if(!t)throw"skeletonData cannot be null";var e=t.bones.length,i=t.slots.length,n,s,a,r,o,h;this.bones=new Array(e);for(a=0;a<e;++a){n=t.bones[a];s=new Spine.Bone(n);if(n.parent){for(r=0;r<e;++r){if(t.bones[r]==n.parent){s.parent=this.bones[r];break}}}this.bones[a]=s}this.slots=new Array(i);this.drawOrder=new Array(i);for(a=0;a<i;++a){o=t.slots[a];s=null;for(r=0;r<e;++r){if(t.bones[r]==o.bone){s=this.bones[r];break}}h=new Spine.Slot(o,this,s);this.slots[a]=h;this.drawOrder[a]=h}};Spine.Skeleton.prototype={destroy:function(){var t,e;for(t=0,e=this.bones.length;t<e;++t){this.bones[t].destroy();this.bones[t]=null}for(t=0,e=this.slots.length;t<e;++t){this.slots[t].destroy();this.slots[t]=null}},updateWorldTransform:function(){var t,e;for(t=0,e=this.bones.length;t<e;++t){this.bones[t].updateWorldTransform(this.flipX,this.flipY)}var i,n;for(t=0,e=this.drawOrder.length;t<e;++t){i=this.drawOrder[t];n=i.attachment;if(n){n.updateWorldTransform(this.flipX,this.flipY,i)}}},setToBindPose:function(){this.setBonesToBindPose();this.setSlotsToBindPose()},setBonesToBindPose:function(){for(var t=0,e=this.bones.length;t<e;++t){this.bones[t].setToBindPose()}},setSlotsToBindPose:function(){for(var t=0,e=this.slots.length;t<e;++t){this.slots[t].setToBindPoseByIndex(t)}},getRootBone:function(){if(this.bones.length===0)return null;return this.bones[0]},findBone:function(t){var e=this.findBoneIndex(t);if(e<0)return null;return this.bones[e]},findBoneIndex:function(t){for(var e=0,i=this.bones.length;e<i;++e){if(this.bones[e].boneData.name==t)return e}return-1},findSlot:function(t){var e=this.findSlotIndex(t);if(e<0)return null;return this.slots[e]},findSlotIndex:function(t){for(var e=0,i=this.slots.length;e<i;++e){if(this.slots[e].slotData.name==t)return e}return-1},setSkinByName:function(t){var e=skeletonData.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){if(this.skin&&t){t.attachAll(this,skin)}this.skin=t},getAttachmentByName:function(t,e){return this.getAttachmentByIndex(this.skeletonData.findSlotIndex(t),e)},getAttachmentByIndex:function(t,e){if(this.skin){return this.skin.getAttachment(t,e)}if(this.skeletonData.defaultSkin){var i=this.skeletonData.defaultSkin.getAttachment(t,e);if(i)return i}return null},setAttachment:function(t,e){if(!t)throw"slotName cannot be null.";var i,n;for(var s=0,a=this.slots.length;s<a;++s){i=this.slots[s];if(i.slotData.name==t){if(e){n=this.getAttachmentByIndex(s,e);if(!n){throw"Attachment not found: "+e+", for slot: "+t}i.setAttachment(n)}return}}throw"Slot not found: "+t},draw:function(t){var e;for(i=0,n=this.drawOrder.length;i<n;++i){e=this.drawOrder[i].attachment;if(e){e.draw(t)}}if(Spine._DEBUG_){for(var s=0,a=this.bones.length;s<a;++s){if(this.bones[s].boneData.length>0){t.save();t.strokeStyle="red";t.translate(this.bones[s].worldX,this.bones[s].worldY);t.rotate(-this.bones[s].worldRotation*(Math.PI/180));t.beginPath();t.moveTo(0,0);t.lineTo(this.bones[s].boneData.length,0);t.closePath();t.stroke();t.restore()}t.fillStyle="green";t.arc(this.bones[s].worldX,this.bones[s].worldY,3,0,Math.PI*2,true);t.closePath();t.fill()}}}};Spine.Bone=function(t){this.boneData=t;this.parent=null;this.x=t.x;this.y=t.y;this.rotation=t.rotation;this.scaleX=t.scaleX;this.scaleY=t.scaleY;this.m00=0;this.m01=0;this.worldX=0;this.m10=0;this.m11=0;this.worldY=0;this.worldRotation=0;this.worldScaleX=1;this.worldScaleY=1;if(!t)throw"boneData cannot be null"};Spine.Bone.prototype={destroy:function(){},setToBindPose:function(){this.x=this.boneData.x;this.y=this.boneData.y;this.rotation=this.boneData.rotation;this.scaleX=this.boneData.scaleX;this.scaleY=this.boneData.scaleY},updateWorldTransform:function(t,e){if(this.parent){this.worldX=this.x*this.parent.m00+this.y*this.parent.m01+this.parent.worldX;this.worldY=this.x*this.parent.m10+this.y*this.parent.m11+this.parent.worldY;this.worldScaleX=this.parent.worldScaleX*this.scaleX;this.worldScaleY=this.parent.worldScaleY*this.scaleY;this.worldRotation=this.parent.worldRotation+this.rotation}else{this.worldX=this.x;this.worldY=this.y;this.worldScaleX=this.scaleX;this.worldScaleY=this.scaleY;this.worldRotation=this.rotation}var i=this.worldRotation*Math.PI/180,n=Math.cos(i),s=Math.sin(i);this.m00=n*this.worldScaleX;this.m10=s*this.worldScaleX;this.m01=-s*this.worldScaleY;this.m11=n*this.worldScaleY;if(t){this.m00*=-1;this.m01*=-1}if(e){this.m10*=-1;this.m11*=-1}if(this.boneData.yDown){this.m10*=-1;this.m11*=-1}}};Spine.Slot=function(t,e,i){this.slotData=t;this.skeleton=e;this.bone=i;this.r=1;this.g=1;this.b=1;this.a=1;this.attachment=null;this._attachmentTime=0;if(!t)throw"slotData cannot be null";if(!e)throw"skeleton cannot be null";if(!i)throw"bone cannot be null";this.setToBindPose()};Spine.Slot.prototype={destroy:function(){},setAttachment:function(t){this.attachment=t;this._attachmentTime=this.skeleton.time},setAttachmentTime:function(t){this._attachmentTime=this.skeleton.time-t},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToBindPoseByIndex:function(t){this.r=this.slotData.r;this.g=this.slotData.g;this.b=this.slotData.b;this.a=this.slotData.a;this.setAttachment(this.slotData.attachmentName?this.skeleton.getAttachmentByIndex(t,this.slotData.attachmentName):null)},setToBindPose:function(){for(var t=0,e=this.skeleton.skeletonData.slots.length;t<e;++t){if(this.slotData==this.skeleton.skeletonData.slots[t]){this.setToBindPoseByIndex(t);return}}}};Spine.Skin=function(t){this.name=t;this._attachments={}};Spine.Skin.prototype={destroy:function(){for(var t in this._attachments){this._attachments[t].destroy();this._attachments[t]=null}},addAttachment:function(t,e,i){if(!i)throw"attachment cannot be null.";var n=[t,e];this._attachments[n]=i},getAttachment:function(t,e){var i=[t,e];if(this._attachments.hasOwnProperty(i)){return this._attachments[i]}return null},attachAll:function(t,e){var i,n;for(var s in this._attachments){i=t.slots[s[0]];if(i.attachment==s[1]){n=this.getAttachment(s[0],s[1]);if(n)i.setAttachment(n)}}}};